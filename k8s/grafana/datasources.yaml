# =====================================================
# Grafana - OpenSearch 데이터 소스 설정
# =====================================================
# 설명: ConfigMap으로 데이터 소스 설정 관리 (Helm values 대안)
# =====================================================

apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-datasources
  namespace: cali-system
data:
  datasources.yaml: |
    apiVersion: 1
    datasources:
    - name: OpenSearch
      type: grafana-opensearch-datasource
      access: proxy
      url: https://<OPENSEARCH_ENDPOINT>  # TODO: Terraform 출력값으로 변경
      jsonData:
        timeField: "@timestamp"
        database: "cali-logs*"
        version: "2.11"
      # TODO: 인증 정보 추가
